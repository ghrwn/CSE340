<section class="account-wrap">
  <h1><%= title %></h1>

  <p class="form-note">All fields are required.</p>

  <!-- Server-side Validation Errors -->
  <% if (errors) { %>
    <ul class="notice">
      <% errors.array().forEach(error => { %>
        <li><%= error.msg %></li>
      <% }) %>
    </ul>
  <% } %>

  <form class="account-form" action="/account/register" method="post">

    <label for="account_firstname">First Name:</label>
    <input
      type="text"
      id="account_firstname"
      name="account_firstname"
      required
      value="<%= locals.account_firstname %>"
    />

    <label for="account_lastname">Last Name:</label>
    <input
      type="text"
      id="account_lastname"
      name="account_lastname"
      required
      value="<%= locals.account_lastname %>"
    />

    <label for="account_email">Email Address:</label>
    <input
      type="email"
      id="account_email"
      name="account_email"
      required
      value="<%= locals.account_email %>"
      placeholder="Enter a valid email address"
    />

    <label for="account_password">Password:</label>

    <div class="password-reqs">
      Passwords must be at least 12 characters and contain at least 1 number, 1 lowercase letter, 1 capital letter, and 1 special character.
    </div>

    <input
      type="password"
      id="account_password"
      name="account_password"
      required
      pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
      placeholder="Min 12 chars, includes upper/lower/number/special"
    />

    <button type="button" id="pswdBtn">Show Password</button>

    <button type="submit">Register</button>

  </form>

  <p class="account-alt">
    Already have an account?
    <a href="/account/login">Login</a>
  </p>
</section>

<script>
  const pswdBtn = document.querySelector("#pswdBtn")

  pswdBtn.addEventListener("click", function () {
    const pswdInput = document.getElementById("account_password")
    const type = pswdInput.getAttribute("type")

    if (type === "password") {
      pswdInput.setAttribute("type", "text")
      pswdBtn.textContent = "Hide Password"
    } else {
      pswdInput.setAttribute("type", "password")
      pswdBtn.textContent = "Show Password"
    }
  })
</script>